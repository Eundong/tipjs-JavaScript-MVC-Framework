/*
 * tipJS - OpenSource Javascript MVC Framework ver.1.22
 * 
 * Copyright 2012.07 SeungHyun PAEK
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * HomePage: http://www.tipjs.com
 * Contact: http://www.tipjs.com/contact
 */
var tipJS=tipJS||{};tipJS.ver=tipJS.version="1.22";(function(){var j=function(U,V){for(var i in V){if(U[i]){continue}U[i]=V[i]}return U};var f=function(X,i){if(!i||typeof i!="object"||(!i.__name&&!i.name)){throw"Please check your "+X+" definition"}var V=(i.__name)?i.__name:i.name;if(typeof(V)!="string"){throw"Please check your "+X+" definition"}if(i.__extend&&i.__extend===V&&X!="controllers"){throw"Can't extend itself"}var U=V.split("."),W=U[0],V=U[1],Y=F(W);if(!Y){throw"Please check your "+X+" definition"}if(Y.loadOrder.presentOrder()===X){if(X=="controllers"){i.__appName__=W}else{if(i.__name){delete i.__name}}p.department[W]=p.department[W]||{};p.department[W][X]=p.department[W][X]||{};p.department[W][X][V]=i}};var I=function(Y,U){if(U===p.OBJECT_TEMPLATE.loadOrder.order[0]){return q(Y[U])}var X=Y.name,V=o.path[U],W=o.applicationPath[X],i=q(Y[U]);return x(W,V,i)};var x=function(W,Y,X){var V=[];for(var U=X.length;U--;){V.push(W+k(Y)+X[U])}return V};var N=function(U,i){if(i.nocache===true){U=(U.indexOf("?")<0)?U+"?":U+"&";U=U+i.paramName+"="+i.version}return U};var t=tipJS.loadJS=function(W,V,U){var i=document.createElement("script");i.type="text/javascript";i.src=N(W,V);i.charset=o.charSet;if(U){if(i.readyState){i.onreadystatechange=function(){if(this.readyState=="loaded"||this.readyState=="complete"){this.onreadystatechange=null;U(this)}}}else{i.onload=function(){U(this)}}}document.getElementsByTagName("head")[0].appendChild(i)};var b=function(U,W,V){var i=function(X){if(s(U,W,X.src)){R(U)}};t(V,A(U),i)};var w=function(U,X){J(U,X);var V=h(U);var Y=I(V,X);p[U][X].requireList=Y;if(Y.length>0){for(var W=Y.length;W--;){b(U,X,Y[W])}}else{R(U)}};var u=tipJS.loadCommonModel=function(U,Y){var W=p.common.models;if(!W[U]||W[U]==undefined){throw"Could not find commonModel: "+U}if(Y===true){var V=p.common.syncModels;if(!V){V=p.common.syncModels={}}if(!V[U]){var i=V[U]=c(W[U]);if(i.__extend&&typeof i.__extend==="string"){i=j(i,u(i.__extend));delete i.__extend}if(U.lastIndexOf("VO")==(U.length-2)){return i}i.loadCommonModel=u;return i}else{return V[U]}}var X=c(W[U]);if(X.__extend&&typeof X.__extend==="string"){X=j(X,u(X.__extend));delete X.__extend}if(U.lastIndexOf("VO")==(U.length-2)){return X}X.loadCommonModel=u;return X};var n=function(X,aa,Y){var V=(!Y)?Q():Y,W=p.department[V].models;if(!W[X]||W[X]==undefined){throw"Could not find model: "+X}if(aa===true){var ab=p.department[V].syncModels;if(!ab){ab=p.department[V].syncModels={}}if(!ab[X]){var U=ab[X]=c(W[X]);if(U.__extend&&typeof U.__extend==="string"){var i=U.__extend.split(".");if(i.length==2){U=j(U,n(i[1],false,i[0]))}else{U=j(U,u(U.__extend))}delete U.__extend}if(X.lastIndexOf("VO")==(X.length-2)){return U}U.loadCommonModel=u;U.loadModel=n;return U}else{return ab[X]}}var Z=c(W[X]);if(Z.__extend&&typeof Z.__extend==="string"){var i=Z.__extend.split(".");if(i.length==2){Z=j(Z,n(i[1],false,i[0]))}else{Z=j(Z,u(Z.__extend))}delete Z.__extend}if(X.lastIndexOf("VO")==(X.length-2)){return Z}Z.loadCommonModel=u;Z.loadModel=n;return Z};var T=tipJS.loadModel=function(U,Y){var Z=(typeof(Y)==="boolean")?Y:false;try{var V=U.split("."),X=V[0],i=V[1];return n(i,Z,X)}catch(W){throw"tipJS.loadModel : invalid parameter"}};var F=function(i){return K[i]};var h=function(i){return K[i].define};var A=function(i){var V={};var U=h(i);if(U){var W=U.noCacheVersion;if(U.noCacheAuto===true){W=""+Math.random()}V.nocache=U.noCache;V.version=W;V.paramName=U.noCacheParam}return V};var C=function(){return K.controllerStack[K.controllerStack.length-1]};var Q=tipJS.getLiveAppName=function(){return C().__appName__};var R=function(U){var Y=F(U);if(Y.loadOrder.isLastOrder()===false){w(U,Y.loadOrder.nextOrder());return}var i=function(ab){var aa=p.common.views;if(!aa||!aa[ab]||aa[ab]==undefined){throw"Could not find commonView: "+ab}var Z=c(aa[ab]);Z.loadCommonView=i;Z.renderTemplate=e;if(Z.__extend&&typeof Z.__extend==="string"){Z=j(Z,i(Z.__extend));delete Z.__extend}return Z};var X=function(ae,Z){var ad=(!Z)?Q():Z,ac=p.department[ad].views;if(!ac||!ac[ae]||ac[ae]==undefined){throw"Could not find view: "+ae}var ab=c(ac[ae]);ab.loadCommonView=i;ab.loadView=X;ab.renderTemplate=e;if(ab.__extend&&typeof ab.__extend==="string"){var aa=ab.__extend.split(".");if(aa.length==2){ab=j(ab,X(aa[1],aa[0]))}else{ab=j(ab,i(ab.__extend))}delete ab.__extend}return ab};var W=Y.controller=p.department[U].controllers;if(W){for(var V in W){W[V].loadCommonModel=u;W[V].loadCommonView=i;W[V].loadModel=n;W[V].loadView=X;W[V].renderTemplate=e}}(function(aa){var ae=F(aa);ae.define.onLoad(ae.onLoadParam);if(y&&y[aa]){var ab=y[aa];for(var ad=0,ac=ab.length;ad<ac;ad++){var Z=ab[ad];tipJS.action(Z.name,Z.param)}delete y[aa]}})(U)};var s=function(U,W,Y){var X=p[U][W].requireList;for(var V=X.length;V--;){if(X[V]===true){continue}if(Y.indexOf(X[V])>=0){X[V]=true;break}}for(var V=X.length;V--;){if(X[V]!==true){return false}}return true};var k=function(i){return g.pathDiv+i+g.pathDiv};var c=tipJS.cloneObject=function(V){if(typeof V=="boolean"||typeof V=="number"||typeof V=="string"){return V}var U=(V instanceof Array)?[]:{};for(var i in V){U[i]=(V[i]&&typeof V[i]=="object")?c(V[i]):V[i]}return U};var B=tipJS.echo=function(W,U,V){if(V&&(typeof V!="string"||typeof V=="string"&&V.split(".").length>5)){return}if(!U){U=""}if(W===null||W===undefined){console.log(((V)?V+".":"")+W);return}if(typeof W=="boolean"||typeof W=="number"||typeof W=="string"){if(typeof W==U||U==""){console.log(((V)?V+".":"")+W)}return}for(var i in W){if(W[i]&&W[i] instanceof Array){console.log(((V)?V+".":"")+i+":Array");B(W[i],U,((V)?V+".":"")+i)}else{if(W[i]&&typeof W[i]=="object"){console.log(((V)?V+".":"")+i+":Object");B(W[i],U,((V)?V+".":"")+i)}else{if(typeof W[i]==U||U==""){console.log(((V)?V+".":"")+i+":"+W[i])}}}}};var q=tipJS.uniqueArray=function(V){var X=[],U=V.length;for(var Y=0;Y<U;Y++){for(var W=Y+1;W<U;W++){if(V[Y]===V[W]){W=++Y}}X.push(V[Y])}return X};var J=function(i,U){p[i]=p[i]||{};p[i][U]=p[i][U]||{}};var D=function(W,V){for(var X=0,U=V.length;X<U;X++){var Y=V[X];if(W.noCache&&W.noCache===true){Y+=(Y.indexOf("?")<0)?"?":"&";Y+=(W.noCacheParam?W.noCacheParam:o.noCacheParam)+"=";if(W.noCacheAuto===true){Y+=Math.random()}else{Y+=(W.noCacheVersion?W.noCacheVersion:o.noCacheVersion)}}document.write('<script type="text/javascript" charset="'+(W.charSet?W.charSet:o.charSet)+'" src="'+Y+'"><\/script>')}};tipJS.config=function(V){if(V.commonLib){D(V,V.commonLib);delete V.commonLib}if(V.commonModel){D(V,V.commonModel);delete V.commonModel}if(V.commonView){D(V,V.commonView);delete V.commonView}o=j(V,p.OBJECT_TEMPLATE.config);if(tipJS.isDevelopment===null){var U=window.location.hostname;for(var W=o.developmentHostList.length;W--;){if(U.match(o.developmentHostList[W])!==null){tipJS.isDevelopment=true;break}}}};var a=function(){var i=new Date();return(i.getHours()*60*60+i.getMinutes()*60+i.getSeconds())+(i.getMilliseconds()/1000)};tipJS.benchmark={};var v={};tipJS.benchmark.mark=function(i){v[i]=a()};tipJS.benchmark.elapsedTime=function(i,W,U){var V=v[i],Y=v[W],X=Y-V;if(U){U(i,W,V,Y,X)}else{tipJS.log("elapsed time["+i+" to "+W+"] : "+X+" seconds","[BENCHMARK]")}};var G=function(){var i=false;if(window.XMLHttpRequest){i=new XMLHttpRequest()}else{if(window.ActiveXObject){try{i=new ActiveXObject("Msxml2.XMLHTTP")}catch(V){try{i=new ActiveXObject("Microsoft.XMLHTTP")}catch(U){}}}}G=function(){return i};return G()};var e=function(W){var V=A(Q()),Y=N(W.url,V),i=G();i.open("GET",Y,false);try{i.send(null)}catch(X){return null}if(i.readyState==4&&i.status==200){var U=i.responseText;U=L(U,W.data);if(typeof W.renderTo=="string"){document.getElementById(W.renderTo).innerHTML+=U}return U}else{throw"Could not find template file:"+Y}};var L=function(U,W){U=U.replace(/\r\n/g,"\n");U=U.replace(/\r/g,"\n");U=U.replace(/\\/g,"\\\\");U=U.replace(/\n/g,"\\n");U=U.replace(/"/g,'\\"');var i=U.split("\\n"),V=new Function("data",M(i));return V(W)};var M=function(ac){var af=[],ad=[],aa="PLANE",ae="VALUE",V="PARSE",Y="__temp_HTML__.push(";af.push("var __temp_HTML__ = [];");for(var X=0,ab=ac.length;X<ab;X++){var Z=ac[X];ad.push(aa);if(Z.indexOf("@>")>-1){if(Z.indexOf("<@=")>-1){ad[X]=ae}else{if(Z.indexOf("<@")>-1){ad[X]=V}else{for(var W=ad.length-1;W>=0;W--){if(ac[W].indexOf("<@")>-1&&ad[W]==aa){for(var U=W;U<=X;U++){ad[U]=V}break}}}}}}for(var X=0,ab=ad.length;X<ab;X++){var Z=ac[X];if(ad[X]==ae){Z='"'+Z+'"';Z=Z.replace(/<@=/g,'"+');Z=Z.replace(/@>/g,'+"');af.push(Y+Z+");")}else{if(ad[X]==V){Z=Z.replace(/<@/g,"");Z=Z.replace(/@>/g,"");af.push(Z)}else{Z='"'+Z+'"';af.push(Y+Z+");")}}}af.push("return __temp_HTML__.join('');");return af.join("")};tipJS.commonModel=function(i){if(!i||typeof i!="object"||(!i.__name&&!i.name)){throw"Please check your CommonModel definition"}var U=(i.__name)?i.__name:i.name;if(typeof(U)!="string"){throw"Please check your CommonModel definition"}if(i.__extend&&i.__extend===U){throw"Can't extend itself"}if(i.__name){delete i.__name}p.common.models[U]=i};tipJS.commonView=function(i){if(!i||typeof i!="object"||(!i.__name&&!i.name)){throw"Please check your CommonView definition"}var U=(i.__name)?i.__name:i.name;if(typeof(U)!="string"){throw"Please check your CommonView definition"}if(i.__extend&&i.__extend===U){throw"Can't extend itself"}if(i.__name){delete i.__name}p.common.views[U]=i};var g=(function(){var i={pathDiv:"/",blank:"",extJS:"js",extDiv:"."};return i})();tipJS.log=function(V,W){window.console=window.console||{log:function(){},error:function(){}};var aa=new Date(),i=aa.getFullYear(),ac=aa.getMonth()+1,X=aa.getDate(),ab=aa.getHours(),U=aa.getMinutes(),Y=aa.getSeconds(),Z=aa.getMilliseconds();console.log(((W)?W:"")+i+"/"+ac+"/"+X+" "+ab+":"+U+":"+Y+"."+Z+" "+V)};tipJS.debug=function(i){if(tipJS.isDevelopment){tipJS.log(i,"[DEBUG]")}};tipJS.controller=function(i){f("controllers",i)};tipJS.model=function(i){f("models",i)};tipJS.view=function(i){f("views",i)};tipJS.action=function(ad,U){var ae,Y,aa;try{ae=ad.split(".");Y=ae[0];aa=ae[1];if(Y.length==0||aa.length==0){throw""}}catch(Z){throw"tipJS.action : invalid parameter"}var ac=F(Y);if(!ac||!ac.loadOrder||!ac.loadOrder.isLastOrder()){y=y||{};y[Y]=y[Y]||[];y[Y].push({name:ad,param:U});return}if(!ac.controller||!ac.controller[aa]){throw"Could not find controller: "+ad}var i;if(tipJS.isDevelopment===true){i=a()}var W=c(ac.controller[aa]);if(!W){throw"Could not find controller"}var V={controllerName:(W.__name)?W.__name:W.name,controller:W,beforeController:ac.define.beforeController,afterController:ac.define.afterController};if(V.beforeController){var X=V.beforeController(U);if(X===false){return}X=true}var ab=function(){var ai=V.controller;try{var aj=function(){if(ai.afterInvoke){ai.afterInvoke(U)}};var af=function(){var ak=true;if(ai.invoke){ak=ai.invoke(U)}if(ak!==false){aj()}};var ag=function(){var ak=true;if(ai.beforeInvoke){ak=ai.beforeInvoke(U)}if(ak!==false){af()}};K.controllerStack=K.controllerStack||[];K.controllerStack.push(ai);ag();K.controllerStack.pop()}catch(ah){K.controllerStack.pop();if(ai.exceptionInvoke){ai.exceptionInvoke(ah,U)}else{K.controllerStack=[];throw ah}}if(V.afterController){V.afterController(U)}if(tipJS.isDevelopment===true){tipJS.debug(ad+" completed in "+(a()-i)+" seconds")}};if(V.controller.async===true){setTimeout(ab,15)}else{ab()}};tipJS.loadApp=function(Y,Z){for(var U=0,V=Y.length;U<V;U++){var X=Y[U],W=[];if(Z){K[X]=K[X]||{};K[X].onLoadParam=Z}W.push(o.applicationPath[X]);W.push(g.pathDiv);W.push(o.defineFileName);W.push(g.extDiv);W.push(g.extJS);setTimeout(function(){if(!K[X].define){throw"Could not find application: "+X}},1000);t(W.join(g.blank),{nocache:true,version:Math.random(),paramName:o.noCacheParam})}};tipJS.define=function(V){V=j(V,p.OBJECT_TEMPLATE.define);if(V.noCache===undefined){V.noCache=o.noCache;V.noCacheVersion=o.noCacheVersion;V.noCacheParam=o.noCacheParam;V.noCacheAuto=o.noCacheAuto}else{if(V.noCache===true){if(V.noCacheVersion===undefined){V.noCacheVersion=o.noCacheVersion}if(V.noCacheParam===undefined){V.noCacheParam=o.noCacheParam}if(V.noCacheAuto===undefined){V.noCacheAuto=o.noCacheAuto}}}var i=V.name;K[i]=K[i]||{};K[i].loadOrder={};K[i].loadOrder=j(K[i].loadOrder,p.OBJECT_TEMPLATE.loadOrder);var U=K[i].loadOrder.presentOrder();J(i,U);K[i].define=V;w(i,U)};var p={};p.OBJECT_TEMPLATE={config:{noCache:false,noCacheVersion:1,noCacheParam:"noCacheVersion",noCacheAuto:false,charSet:"utf-8",defineFileName:"define",path:{controllers:"controllers",models:"models",views:"views"},developmentHostList:[],applicationPath:{}},define:{extLib:[],controllers:[],models:[],views:[],templates:[],onLoad:function(){},beforeController:function(){},afterController:function(){}},loadOrder:{index:0,init:function(){this.index=0},presentOrder:function(){return this.order[this.index]},nextOrder:function(){return this.order[++this.index]},isLastOrder:function(){return(this.index+1)==this.order.length},order:["extLib","controllers","models","views"]}};p.department=p.department||{};p.common=p.common||{};p.common.models=p.common.models||{};p.common.views=p.common.views||{};var K={controllerStack:[]},y={},o=j({},p.OBJECT_TEMPLATE.config),l=window.location.pathname,O=window.location.search,H=document.getElementsByTagName("script"),E,d,m,r,z=null,P=o.developmentHostList;for(var S=H.length;S--;){d=H[S].src;m=d.match(/tipJS-MVC-1\.22\.js$/);if(m){E=d.substring(0,d.length-m[0].length);break}}document.write('<script type="text/javascript" charset="UTF-8" src="'+E+"tipJS.config.js?"+o.noCacheParam+"="+Math.random()+'"><\/script>');if(O.match("(\\?|&)debug")!==null||l.match("debug")!==null){z=true}else{if(O.match("(\\?|&)nodebug")!==null||l.match("nodebug")!==null){z=false}}tipJS.isDevelopment=z})();