/*
 * tipJS - OpenSource Javascript MVC Framework ver.1.20
 * 
 * Copyright 2012.07 SeungHyun PAEK
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * HomePage: http://www.tipjs.com
 * Contact: http://www.tipjs.com/contact
 */
var tipJS=tipJS||{};tipJS.ver=tipJS.version="1.20";(function(){var j=function(T,U){for(var i in U){if(T[i]){continue}T[i]=U[i]}return T};var f=function(W,i){if(!i||!i.name||typeof(i.name)!="string"){throw"Please check your "+W+" definition"}var T=i.name.split(".");var V=T[0];var U=T[1];var X=E(V);if(!X){throw"Please check your "+W+" definition"}if(X.loadOrder.presentOrder()===W){i.__appName__=V;q.department[V]=q.department[V]||{};q.department[V][W]=q.department[V][W]||{};q.department[V][W][U]=i}};var H=function(X,T){if(T===q.OBJECT_TEMPLATE.loadOrder.order[0]){return r(X[T])}var W=X.name,U=o.path[T],V=o.applicationPath[W],i=r(X[T]);return x(V,U,i)};var x=function(V,Y,X){var U=[];for(var T=0,W=X.length;T<W;T++){U.push(V+k(Y)+X[T])}return U};var N=function(T,i){if(i.nocache===true){T=(T.indexOf("?")<0)?T+"?":T+"&";T=T+i.paramName+"="+i.version}return T};var u=function(V,U,T){var i=document.createElement("script");i.type="text/javascript";i.src=N(V,U);i.charset=o.charSet;if(T){var W=false;i.onreadystatechange=function(){if(this.readyState=="loaded"||this.readyState=="complete"){if(W==true){return}W=true;T(this)}};i.onload=function(){if(!document.all){T(this)}}}document.getElementsByTagName("head")[0].appendChild(i)};var b=function(T,V,U){var i=function(W){if(t(T,V,W.src)){Q(T)}};u(U,A(T),i)};var w=function(T,W){J(T,W);var U=h(T);var Y=H(U,W);q[T][W].requireList=Y;if(Y.length>0){for(var V=0,X=Y.length;V<X;V++){b(T,W,Y[V])}}else{Q(T)}};var v=tipJS.loadCommonModel=function(i,W){var U=q.common.models;if(!U[i]||U[i]==undefined){throw"Could not find commonModel: "+i}if(W===true){var T=q.common.syncModels;if(!T){T=q.common.syncModels={}}if(!T[i]){T[i]=c(U[i]);T[i].loadCommonModel=v}return T[i]}var V={};V=c(U[i]);V.loadCommonModel=v;return V};var n=function(T,Y,i){var V,X;if(!i){X=this.__appName__}else{X=i}V=q.department[X].models;if(!V[T]||V[T]==undefined){throw"Could not find model: "+T}if(Y===true){var U=q.department[X].syncModels;if(!U){U=q.department[X].syncModels={}}if(!U[T]){U[T]=c(V[T]);U[T].loadCommonModel=v;U[T].loadModel=n}return U[T]}var W={};W=c(V[T]);W.loadCommonModel=v;W.loadModel=n;return W};var S=tipJS.loadModel=function(T,X){var Y=(typeof(X)==="boolean")?X:false;try{var U=T.split("."),W=U[0],i=U[1];return n(i,Y,W)}catch(V){throw"tipJS.loadModel : invalid parameter"}};var E=function(i){return K[i]};var h=function(i){return K[i].define};var A=function(i){var U={};var T=h(i);if(T){var V=T.noCacheVersion;if(T.noCacheAuto&&T.noCacheAuto===true){V=""+Math.random()}U.nocache=T.noCache;U.version=V;U.paramName=T.noCacheParam}return U};var Q=function(T){var Y=E(T);if(Y.loadOrder.isLastOrder()===false){var X=Y.loadOrder.nextOrder();w(T,X);return}var i=function(ab){var aa=q.common.views;if(!aa[ab]||aa[ab]==undefined){throw"Could not find commonView: "+ab}var Z={};Z=c(aa[ab]);Z.loadCommonView=i;Z.renderTemplate=e;return Z};var W=function(ab){var aa=q.department[this.__appName__].views;if(!aa[ab]||aa[ab]==undefined){throw"Could not find view: "+ab}var Z={};Z=c(aa[ab]);Z.loadCommonView=i;Z.loadView=W;Z.renderTemplate=e;return Z};var V=Y.controller=q.department[T].controllers;if(V){for(var U in V){if(q.common.models){V[U].loadCommonModel=v}if(q.common.views){V[U].loadCommonView=i}if(q.department[T].models){V[U].loadModel=n}if(q.department[T].views){V[U].loadView=W}V[U].renderTemplate=e}}(function(aa){var ae=E(aa);ae.define.onLoad(ae.onLoadParam);if(y&&y[aa]){var ab=y[aa];for(var ad=0,ac=ab.length;ad<ac;ad++){var Z=ab[ad];tipJS.action(Z.name,Z.param)}delete y[aa]}})(T)};var t=function(T,V,Y){var X=q[T][V].requireList;for(var U=0,W=X.length;U<W;U++){if(X[U]===true){continue}if(Y.indexOf(X[U])>=0){X[U]=true;break}}for(var U=0,W=X.length;U<W;U++){if(X[U]!==true){return false}}return true};var k=function(i){return g.pathDiv+i+g.pathDiv};var c=tipJS.cloneObject=function(U){if(typeof U=="boolean"||typeof U=="number"||typeof U=="string"){return U}var T=(U instanceof Array)?[]:{};for(var i in U){if(U[i]&&typeof U[i]=="object"){T[i]=c(U[i])}else{T[i]=U[i]}}return T};var B=tipJS.echo=function(V,T,U){if(!T){T=""}if(U&&(typeof U!="string"||typeof U=="string"&&U.split(".").length>5)){return}if(typeof V=="boolean"||typeof V=="number"||typeof V=="string"){if(typeof V==T||T==""){console.log(((U)?U+".":"")+V)}return}for(var i in V){if(V[i]&&V[i] instanceof Array){console.log(((U)?U+".":"")+i+":Array");B(V[i],T,((U)?U+".":"")+i)}else{if(V[i]&&typeof V[i]=="object"){console.log(((U)?U+".":"")+i+":Object");B(V[i],T,((U)?U+".":"")+i)}else{if(typeof V[i]==T||T==""){console.log(((U)?U+".":"")+i+":"+V[i])}}}}};var r=function(U){var W=[],T=U.length;for(var X=0;X<T;X++){for(var V=X+1;V<T;V++){if(U[X]===U[V]){V=++X}}W.push(U[X])}return W};var J=function(i,T){q[i]=q[i]||{};q[i][T]=q[i][T]||{}};var C=function(V,U){for(var W=0,T=U.length;W<T;W++){var X=U[W];if(V.noCache&&V.noCache===true){X=(X.indexOf("?")<0)?X+"?":X+"&";X=X+(V.noCacheParam?V.noCacheParam:o.noCacheParam)+"=";if(V.noCacheAuto&&V.noCacheAuto===true){X=X+Math.random()}else{X=X+(V.noCacheVersion?V.noCacheVersion:o.noCacheVersion)}}document.write('<script type="text/javascript" charset="'+(V.charSet?V.charSet:o.charSet)+'" src="'+X+'"><\/script>')}};tipJS.config=function(U){if(U.commonLib){C(U,U.commonLib);delete U.commonLib}if(U.commonModel){C(U,U.commonModel);delete U.commonModel}if(U.commonView){C(U,U.commonView);delete U.commonView}o=j(U,q.OBJECT_TEMPLATE.config);if(tipJS.isDevelopment===null){var T=window.location.hostname;for(var W=0,V=o.developmentHostList.length;W<V;W++){if(T.match(o.developmentHostList[W])!==null){tipJS.isDevelopment=true;break}}}};var a=function(){var i=new Date();return(i.getHours()*60*60+i.getMinutes()*60+i.getSeconds())+(i.getMilliseconds()/1000)};tipJS.benchmark={};var I={};tipJS.benchmark.mark=function(i){I[i]=a()};tipJS.benchmark.elapsedTime=function(i,V,T){var U=I[i],X=I[V],W=X-U;if(T){T(i,V,U,X,W)}else{tipJS.log("elapsed time["+i+" to "+V+"] : "+W+" seconds","[BENCHMARK]")}};var F=function(){var i=false;if(window.XMLHttpRequest){i=new XMLHttpRequest()}else{if(window.ActiveXObject){try{i=new ActiveXObject("Msxml2.XMLHTTP")}catch(U){try{i=new ActiveXObject("Microsoft.XMLHTTP")}catch(T){}}}}return i};var e=function(V){var U=A(this.__appName__);var X=N(V.url,U);var i=F();i.open("GET",X,false);try{i.send(null)}catch(W){return null}if(i.readyState==4&&i.status==200){var T=i.responseText;T=L(T,V.data);if(typeof V.renderTo=="string"){document.getElementById(V.renderTo).innerHTML+=T}return T}else{throw"Could not find template file:"+X}};var L=function(T,W){T=T.replace(/\r\n/g,"\n");T=T.replace(/\r/g,"\n");T=T.replace(/\\/g,"\\\\");T=T.replace(/\n/g,"\\n");T=T.replace(/"/g,'\\"');var i=T.split("\\n");var U=M(i);var V=new Function("data",U);return V(W)};var M=function(ab){var ae=[],ac=[];ae.push("var __temp_HTML__ = [];");var Z="PLANE",ad="VALUE",U="PARSE";var X="__temp_HTML__.push(";for(var W=0,aa=ab.length;W<aa;W++){var Y=ab[W];ac.push(Z);if(Y.indexOf("@>")>-1){if(Y.indexOf("<@=")>-1){ac[W]=ad}else{if(Y.indexOf("<@")>-1){ac[W]=U}else{for(var V=ac.length-1;V>=0;V--){if(ab[V].indexOf("<@")>-1&&ac[V]==Z){for(var T=V;T<=W;T++){ac[T]=U}break}}}}}}for(var W=0,aa=ac.length;W<aa;W++){var Y=ab[W];if(ac[W]==ad){Y='"'+Y+'"';Y=Y.replace(/<@=/g,'"+');Y=Y.replace(/@>/g,'+"');ae.push(X+Y+");")}else{if(ac[W]==U){Y=Y.replace(/<@/g,"");Y=Y.replace(/@>/g,"");ae.push(Y)}else{Y='"'+Y+'"';ae.push(X+Y+");")}}}ae.push("return __temp_HTML__.join('');");return ae.join("")};tipJS.commonModel=function(i){if(i.name){q.common.models[i.name]=i}else{throw"Please Check commonModel name"}};tipJS.commonView=function(i){if(i.name){q.common.views[i.name]=i}else{throw"Please Check commonView name"}};var g=(function(){var i={pathDiv:"/",blank:"",extJS:"js",extDiv:"."};return i})();tipJS.log=function(U,V){window.console=window.console||{log:function(){},error:function(){}};var Z=new Date(),i=Z.getFullYear(),ab=Z.getMonth()+1,W=Z.getDate(),aa=Z.getHours(),T=Z.getMinutes(),X=Z.getSeconds(),Y=Z.getMilliseconds();console.log(((V)?V:"")+i+"/"+ab+"/"+W+" "+aa+":"+T+":"+X+"."+Y+" "+U)};tipJS.debug=function(i){if(tipJS.isDevelopment){tipJS.log(i,"[DEBUG]")}};tipJS.controller=function(i){f("controllers",i)};tipJS.model=function(i){f("models",i)};tipJS.view=function(i){f("views",i)};tipJS.action=function(ac,T){var ad,V,Y;try{ad=ac.split(".");V=ad[0];Y=ad[1]}catch(X){throw"tipJS.action : invalid parameter"}var ab=E(V);if(!ab||!ab.loadOrder||!ab.loadOrder.isLastOrder()){y=y||{};y[V]=y[V]||[];y[V].push({name:ac,param:T});return}if(!ab||!ab.controller||!ab.controller[Y]){throw"Could not find controller: "+ac}var i;if(tipJS.isDevelopment===true){i=a()}var U=c(ab.controller[Y]);var W=ab.define.beforeController;var aa=ab.define.afterController;if(U){if(W){W(T)}var Z=function(){try{var ah=function(){if(U.afterInvoke){U.afterInvoke(T)}};var ae=function(){var ai=true;if(U.invoke){ai=U.invoke(T)}if(ai!==false){ah()}};var af=function(){var ai=true;if(U.beforeInvoke){ai=U.beforeInvoke(T)}if(ai!==false){ae()}};af()}catch(ag){if(U.exceptionInvoke){U.exceptionInvoke(ag,T)}else{throw ag}}if(aa){aa(T)}if(tipJS.isDevelopment===true){tipJS.debug(ac+" completed in "+(a()-i)+" seconds")}delete U};if(U.async===true){setTimeout(Z,0)}else{Z()}}else{throw"Could not find controller"}};tipJS.loadApp=function(X,Y){for(var T=0,U=X.length;T<U;T++){var W=X[T],V=[];if(Y){K[W]=K[W]||{};K[W].onLoadParam=Y}V.push(o.applicationPath[W]);V.push(g.pathDiv);V.push(o.defineFileName);V.push(g.extDiv);V.push(g.extJS);setTimeout(function(){if(!K[W].define){throw"Could not find application: "+W}},1000);u(V.join(g.blank),{nocache:true,version:Math.random(),paramName:o.noCacheParam})}};tipJS.define=function(U){U=j(U,q.OBJECT_TEMPLATE.define);if(U.noCache===undefined){U.noCache=o.noCache;U.noCacheVersion=o.noCacheVersion;U.noCacheParam=o.noCacheParam;U.noCacheAuto=o.noCacheAuto}else{if(U.noCache===true){if(U.noCacheVersion===undefined){U.noCacheVersion=o.noCacheVersion}if(U.noCacheParam===undefined){U.noCacheParam=o.noCacheParam}if(U.noCacheAuto===undefined){U.noCacheAuto=o.noCacheAuto}}}var i=U.name;K[i]=K[i]||{};K[i].loadOrder={};K[i].loadOrder=j(K[i].loadOrder,q.OBJECT_TEMPLATE.loadOrder);var T=K[i].loadOrder.presentOrder();J(i,T);K[i].define=U;w(i,T)};var q={};q.OBJECT_TEMPLATE={config:{noCache:false,noCacheVersion:1,noCacheParam:"noCacheVersion",noCacheAuto:false,charSet:"utf-8",defineFileName:"define",path:{controllers:"controllers",models:"models",views:"views"},developmentHostList:[],applicationPath:{}},define:{extLib:[],controllers:[],models:[],views:[],templates:[],onLoad:function(){},beforeController:function(){},afterController:function(){}},loadOrder:{index:0,init:function(){this.index=0},presentOrder:function(){return this.order[this.index]},nextOrder:function(){return this.order[++this.index]},isLastOrder:function(){return(this.index+1)==this.order.length},order:["extLib","controllers","models","views"]}};q.department=q.department||{};q.common=q.common||{};q.common.models=q.common.models||{};q.common.views=q.common.views||{};var K={};var y={};var o=j({},q.OBJECT_TEMPLATE.config);var l=window.location.pathname,O=window.location.search,G=document.getElementsByTagName("script"),D,d,m,s,z=null,P=o.developmentHostList;for(var R=0,p=G.length;R<p;R++){d=G[R].src;m=d.match(/tipJS-MVC-1\.20\.js$/);if(m){D=d.substring(0,d.length-m[0].length);break}}document.write('<script type="text/javascript" charset="UTF-8" src="'+D+"tipJS.config.js?"+o.noCacheParam+"="+Math.random()+'"><\/script>');if(O.match("(\\?|&)debug")!==null||l.match("debug")!==null){z=true}else{if(O.match("(\\?|&)nodebug")!==null||l.match("nodebug")!==null){z=false}}tipJS.isDevelopment=z})();