/*
 * tipJS - OpenSource Javascript MVC Framework ver.1.19
 * 
 * Copyright 2012.07 SeungHyun PAEK
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * HomePage: http://www.tipjs.com
 * Contact: http://www.tipjs.com/contact
 */
var tipJS=tipJS||{};tipJS.ver=tipJS.version="1.19";(function(){var h=function(N,O){for(var i in O){if(N[i]){continue}N[i]=O[i]}return N};var f=function(Q,i){if(!i||!i.name||typeof(i.name)!="string"){throw"Please check your "+Q+" definition"}var N=i.name.split(".");var P=N[0];var O=N[1];var R=A(P);if(!R){throw"Please check your "+Q+" definition"}if(R.loadOrder.presentOrder()===Q){i.__appName__=P;__TIPJS_TEMPLATE__.department[P]=__TIPJS_TEMPLATE__.department[P]||{};__TIPJS_TEMPLATE__.department[P][Q]=__TIPJS_TEMPLATE__.department[P][Q]||{};__TIPJS_TEMPLATE__.department[P][Q][O]=i}};var D=function(R,N){if(N===__TIPJS_TEMPLATE__.OBJECT_TEMPLATE.loadOrder.order[0]){return p(R[N])}var Q=R.name,O=tipJS._config.path[N],P=tipJS._config.applicationPath[Q],i=p(R[N]);return v(P,O,i)};var v=function(P,S,R){var O=[];for(var N=0,Q=R.length;N<Q;N++){O.push(P+j(S)+R[N])}return O};var H=function(N,i){if(i.nocache===true){N=(N.indexOf("?")<0)?N+"?":N+"&";N=N+i.paramName+"="+i.version}return N};var s=function(P,O,N){var i=document.createElement("script");i.type="text/javascript";i.src=H(P,O);i.charset=tipJS._config.charSet;if(N){var Q=false;i.onreadystatechange=function(){if(this.readyState=="loaded"||this.readyState=="complete"){if(Q==true){return}Q=true;N(this)}};i.onload=function(){if(!document.all){N(this)}}}document.getElementsByTagName("head")[0].appendChild(i)};var b=function(N,P,O){var i=function(Q){if(r(N,P,Q.src)){K(N)}};s(O,x(N),i)};var u=function(N,Q){E(N,Q);var O=g(N);var S=D(O,Q);__TIPJS_TEMPLATE__[N][Q].requireList=S;if(S.length>0){for(var P=0,R=S.length;P<R;P++){b(N,Q,S[P])}}else{K(N)}};var t=tipJS.loadCommonModel=function(i,Q){var O=__TIPJS_TEMPLATE__.common.models;if(!O[i]||O[i]==undefined){throw"Could not find commonModel: "+i}if(Q===true){var N=__TIPJS_TEMPLATE__.common.syncModels;if(!N){N=__TIPJS_TEMPLATE__.common.syncModels={}}if(!N[i]){N[i]=c(O[i]);N[i].loadCommonModel=t}return N[i]}var P={};P=c(O[i]);P.loadCommonModel=t;return P};var m=function(N,S,i){var P,R;if(!i){R=this.__appName__}else{R=i}P=__TIPJS_TEMPLATE__.department[R].models;if(!P[N]||P[N]==undefined){throw"Could not find model: "+N}if(S===true){var O=__TIPJS_TEMPLATE__.department[R].syncModels;if(!O){O=__TIPJS_TEMPLATE__.department[R].syncModels={}}if(!O[N]){O[N]=c(P[N]);O[N].loadCommonModel=t;O[N].loadModel=m}return O[N]}var Q={};Q=c(P[N]);Q.loadCommonModel=t;Q.loadModel=m;return Q};var M=tipJS.loadModel=function(N,R){var S=(typeof(R)==="boolean")?R:false;try{var O=N.split("."),Q=O[0],i=O[1];return m(i,S,Q)}catch(P){throw"tipJS.loadModel : invalid parameter"}};var A=function(i){return tipJS.__application__[i]};var g=function(i){return tipJS.__application__[i].define};var x=function(i){var O={};var N=g(i);if(N){var P=N.noCacheVersion;if(N.noCacheAuto&&N.noCacheAuto===true){P=""+Math.random()}O.nocache=N.noCache;O.version=P;O.paramName=N.noCacheParam}return O};var K=function(N){var S=A(N);if(S.loadOrder.isLastOrder()===false){var R=S.loadOrder.nextOrder();u(N,R);return}var i=function(V){var U=__TIPJS_TEMPLATE__.common.views;if(!U[V]||U[V]==undefined){throw"Could not find commonView: "+V}var T={};T=c(U[V]);T.loadCommonView=i;T.renderTemplate=d;return T};var Q=function(V){var U=__TIPJS_TEMPLATE__.department[this.__appName__].views;if(!U[V]||U[V]==undefined){throw"Could not find view: "+V}var T={};T=c(U[V]);T.loadCommonView=i;T.loadView=Q;T.renderTemplate=d;return T};var P=S.controller=__TIPJS_TEMPLATE__.department[N].controllers;if(P){for(var O in P){if(__TIPJS_TEMPLATE__.common.models){P[O].loadCommonModel=t}if(__TIPJS_TEMPLATE__.common.views){P[O].loadCommonView=i}if(__TIPJS_TEMPLATE__.department[N].models){P[O].loadModel=m}if(__TIPJS_TEMPLATE__.department[N].views){P[O].loadView=Q}P[O].renderTemplate=d}}(function(U){var Y=A(U);Y.define.onLoad(Y.onLoadParam);if(tipJS.__reservedStack__&&tipJS.__reservedStack__[U]){var V=tipJS.__reservedStack__[U];for(var X=0,W=V.length;X<W;X++){var T=V[X];tipJS.action(T.name,T.param)}delete tipJS.__reservedStack__[U]}})(N)};var r=function(N,P,S){var R=__TIPJS_TEMPLATE__[N][P].requireList;for(var O=0,Q=R.length;O<Q;O++){if(R[O]===true){continue}if(S.indexOf(R[O])>=0){R[O]=true;break}}for(var O=0,Q=R.length;O<Q;O++){if(R[O]!==true){return false}}return true};var j=function(i){return tipJS._const.pathDiv+i+tipJS._const.pathDiv};var c=tipJS.cloneObject=function(O){if(typeof O=="boolean"||typeof O=="number"||typeof O=="string"){return O}var N=(O instanceof Array)?[]:{};for(var i in O){if(O[i]&&typeof O[i]=="object"){N[i]=c(O[i])}else{N[i]=O[i]}}return N};var p=function(O){var Q=[],N=O.length;for(var R=0;R<N;R++){for(var P=R+1;P<N;P++){if(O[R]===O[P]){P=++R}}Q.push(O[R])}return Q};var E=function(i,N){__TIPJS_TEMPLATE__[i]=__TIPJS_TEMPLATE__[i]||{};__TIPJS_TEMPLATE__[i][N]=__TIPJS_TEMPLATE__[i][N]||{}};var y=function(P,O){for(var Q=0,N=O.length;Q<N;Q++){var R=O[Q];if(P.noCache&&P.noCache===true){R=(R.indexOf("?")<0)?R+"?":R+"&";R=R+(P.noCacheParam?P.noCacheParam:tipJS._config.noCacheParam)+"=";if(P.noCacheAuto&&P.noCacheAuto===true){R=R+Math.random()}else{R=R+(P.noCacheVersion?P.noCacheVersion:tipJS._config.noCacheVersion)}}document.write('<script type="text/javascript" charset="'+(P.charSet?P.charSet:tipJS._config.charSet)+'" src="'+R+'"><\/script>')}};var n=function(O){if(O.commonLib){y(O,O.commonLib);delete O.commonLib}if(O.commonModel){y(O,O.commonModel);delete O.commonModel}if(O.commonView){y(O,O.commonView);delete O.commonView}tipJS._config=h(O,__TIPJS_TEMPLATE__.OBJECT_TEMPLATE.config);if(tipJS.isDevelopment===null){var N=window.location.hostname;for(var Q=0,P=tipJS._config.developmentHostList.length;Q<P;Q++){if(N.match(tipJS._config.developmentHostList[Q])!==null){tipJS.isDevelopment=true;break}}}};var a=function(){var i=new Date();return(i.getHours()*60*60+i.getMinutes()*60+i.getSeconds())+(i.getMilliseconds()/1000)};var B=function(){var i=false;if(window.XMLHttpRequest){i=new XMLHttpRequest()}else{if(window.ActiveXObject){try{i=new ActiveXObject("Msxml2.XMLHTTP")}catch(O){try{i=new ActiveXObject("Microsoft.XMLHTTP")}catch(N){}}}}return i};var d=function(O){var N=x(this.__appName__);var P=H(O.url,N);var i=B();i.onreadystatechange=function(){if(i.readyState==4){if(i.status==200){var Q=i.responseText;Q=F(Q,O.data);document.getElementById(O.renderTo).innerHTML+=Q}else{throw"Could not find template file:"+P}}};i.open("GET",P,false);i.send()};var F=function(N,Q){N=N.replace(/\r\n/g,"\n");N=N.replace(/\r/g,"\n");N=N.replace(/\\/g,"\\\\");N=N.replace(/\n/g,"\\n");N=N.replace(/"/g,'\\"');var i=N.split("\\n");var O=G(i);var P=new Function("data",O);return P(Q)};var G=function(R){var Q=[];Q.push("var __temp_HTML__ = [];");var O="__temp_HTML__.push(";for(var P=0,N=R.length;P<N;P++){var S=R[P];if(S.indexOf("<@=")>-1){S='"'+S+'"';S=S.replace(/<@=/g,'"+');S=S.replace(/@>/g,'+"');Q.push(O+S+");")}else{if(S.indexOf("<@")>-1){S=S.replace(/<@/g,"");S=S.replace(/@>/g,"");Q.push(S)}else{S='"'+S+'"';Q.push(O+S+");")}}}Q.push("return __temp_HTML__.join('');");return Q.join("")};tipJS.commonModel=function(i){if(i.name){__TIPJS_TEMPLATE__.common.models[i.name]=i}else{throw"Please Check commonModel name"}};tipJS.commonView=function(i){if(i.name){__TIPJS_TEMPLATE__.common.views[i.name]=i}else{throw"Please Check commonView name"}};tipJS.config=n;tipJS._const=(function(){var i={pathDiv:"/",blank:"",extJS:"js",extDiv:"."};return i})();tipJS.log=function(O){window.console=window.console||{log:function(){},error:function(){}};var S=new Date(),i=S.getFullYear(),U=S.getMonth()+1,P=S.getDate(),T=S.getHours(),N=S.getMinutes(),Q=S.getSeconds(),R=S.getMilliseconds();console.log(i+"/"+U+"/"+P+" "+T+":"+N+":"+Q+"."+R+" ### "+O)};tipJS.debug=function(i){if(tipJS.isDevelopment){tipJS.log(i)}};__TIPJS_TEMPLATE__={};__TIPJS_TEMPLATE__.OBJECT_TEMPLATE={config:{noCache:false,noCacheVersion:1,noCacheParam:"noCacheVersion",noCacheAuto:false,charSet:"utf-8",defineFileName:"define",path:{controllers:"controllers",models:"models",views:"views"},developmentHostList:[],applicationPath:{}},define:{extLib:[],controllers:[],models:[],views:[],templates:[],onLoad:function(){},beforeController:function(){},afterController:function(){}},loadOrder:{index:0,init:function(){this.index=0},presentOrder:function(){return this.order[this.index]},nextOrder:function(){return this.order[++this.index]},isLastOrder:function(){return(this.index+1)==this.order.length},order:["extLib","controllers","models","views"]}};tipJS.controller=function(i){f("controllers",i)};tipJS.model=function(i){f("models",i)};tipJS.view=function(i){f("views",i)};tipJS.action=function(W,N){var X,P,S;try{X=W.split(".");P=X[0];S=X[1]}catch(R){throw"tipJS.action : invalid parameter"}var V=A(P);if(!V||!V.loadOrder||!V.loadOrder.isLastOrder()){tipJS.__reservedStack__=tipJS.__reservedStack__||{};tipJS.__reservedStack__[P]=tipJS.__reservedStack__[P]||[];tipJS.__reservedStack__[P].push({name:W,param:N});return}if(!V||!V.controller||!V.controller[S]){throw"Could not find controller: "+W}var i;if(tipJS.isDevelopment===true){i=a()}var O=c(V.controller[S]);var Q=V.define.beforeController;var U=V.define.afterController;if(O){if(Q){Q(N)}var T=function(){try{var ab=function(){if(O.afterInvoke){O.afterInvoke(N)}};var Y=function(){var ac=true;if(O.invoke){ac=O.invoke(N)}if(ac!==false){ab()}};var Z=function(){var ac=true;if(O.beforeInvoke){ac=O.beforeInvoke(N)}if(ac!==false){Y()}};Z()}catch(aa){if(O.exceptionInvoke){O.exceptionInvoke(aa,N)}else{throw aa}}if(U){U(N)}if(tipJS.isDevelopment===true){tipJS.debug(W+" completed in "+(a()-i)+" seconds")}delete O};if(O.async===true){setTimeout(T,0)}else{T()}}else{throw"Could not find controller"}};tipJS.loadApp=function(R,S){for(var N=0,O=R.length;N<O;N++){var Q=R[N],P=[];if(S){tipJS.__application__[Q]=tipJS.__application__[Q]||{};tipJS.__application__[Q].onLoadParam=S}P.push(tipJS._config.applicationPath[Q]);P.push(tipJS._const.pathDiv);P.push(tipJS._config.defineFileName);P.push(tipJS._const.extDiv);P.push(tipJS._const.extJS);setTimeout(function(){if(!tipJS.__application__[Q].define){throw"Could not find application: "+Q}},1000);s(P.join(tipJS._const.blank),{nocache:true,version:Math.random(),paramName:tipJS._config.noCacheParam})}};tipJS.define=function(O){O=h(O,__TIPJS_TEMPLATE__.OBJECT_TEMPLATE.define);if(O.noCache===undefined){O.noCache=tipJS._config.noCache;O.noCacheVersion=tipJS._config.noCacheVersion;O.noCacheParam=tipJS._config.noCacheParam;O.noCacheAuto=tipJS._config.noCacheAuto}else{if(O.noCache===true){if(O.noCacheVersion===undefined){O.noCacheVersion=tipJS._config.noCacheVersion}if(O.noCacheParam===undefined){O.noCacheParam=tipJS._config.noCacheParam}if(O.noCacheAuto===undefined){O.noCacheAuto=tipJS._config.noCacheAuto}}}var i=O.name;tipJS.__application__[i]=tipJS.__application__[i]||{};tipJS.__application__[i].loadOrder={};tipJS.__application__[i].loadOrder=h(tipJS.__application__[i].loadOrder,__TIPJS_TEMPLATE__.OBJECT_TEMPLATE.loadOrder);var N=tipJS.__application__[i].loadOrder.presentOrder();E(i,N);tipJS.__application__[i].define=O;u(i,N)};__TIPJS_TEMPLATE__.department=__TIPJS_TEMPLATE__.department||{};__TIPJS_TEMPLATE__.common=__TIPJS_TEMPLATE__.common||{};__TIPJS_TEMPLATE__.common.models=__TIPJS_TEMPLATE__.common.models||{};__TIPJS_TEMPLATE__.common.views=__TIPJS_TEMPLATE__.common.views||{};tipJS.__application__=tipJS.__application__||{};tipJS._config=tipJS._config||{};tipJS._config=h(tipJS._config,__TIPJS_TEMPLATE__.OBJECT_TEMPLATE.config);var k=window.location.pathname,I=window.location.search,C=document.getElementsByTagName("script"),z,e,l,q,w=null,J=tipJS._config.developmentHostList;for(var L=0,o=C.length;L<o;L++){e=C[L].src;l=e.match(/tipJS-MVC-1\.19\.js$/);if(l){z=e.substring(0,e.length-l[0].length);break}}document.write('<script type="text/javascript" charset="UTF-8" src="'+z+"tipJS.config.js?"+tipJS._config.noCacheParam+"="+Math.random()+'"><\/script>');if(I.match("(\\?|&)debug")!==null||k.match("debug")!==null){w=true}else{if(I.match("(\\?|&)nodebug")!==null||k.match("nodebug")!==null){w=false}}tipJS.isDevelopment=w})();