/*
 * tipJS - Javascript MVC Framework ver.1.18
 * 
 * Copyright 2012.07 SeungHyun PAEK
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * HomePage: http://www.tipjs.com
 * Contact: http://www.tipjs.com/contact
 */
var tipJS=tipJS||{};tipJS.ver=tipJS.version="1.18";(function(){var M=tipJS.mergeObject=function(N,O){for(var i in O){if(N[i]){continue}N[i]=O[i]}return N};var e=function(N,Q){if(!Q||!Q.name||typeof(Q.name)!="string"){throw"Please check your "+N+" definition"}var i=Q.name.split(".");var P=i[0];var O=i[1];if(!tipJS.__application__[P]){throw"Please check your "+N+" definition"}if(tipJS.__application__[P].loadOrder.presentOrder()===N){Q.__appName__=P;__TIPJS_TEMPLATE__.department[P]=__TIPJS_TEMPLATE__.department[P]||{};__TIPJS_TEMPLATE__.department[P][N]=__TIPJS_TEMPLATE__.department[P][N]||{};__TIPJS_TEMPLATE__.department[P][N][O]=Q}else{}};var l=function(i,O){if(O===__TIPJS_TEMPLATE__.objectTmp.loadOrder.order[0]){return p(i[O])}var R=i.name,P=tipJS._config.path[O],Q=tipJS._config.applicationPath[R],N=p(i[O]);return u(Q,P,N)};var F=function(N,i){if(i.nocache&&i.nocache===true){N=(N.indexOf("?")<0)?N+"?":N+"&";N=N+i.paramName+"="+i.version}return N};var r=function(P,N,R){var i=document.getElementsByTagName("head")[0];var O=document.createElement("script");O.type="text/javascript";O.src=F(P,N);O.charset=tipJS._config.charSet;if(R){var Q=false;O.onreadystatechange=function(){if(this.readyState=="loaded"||this.readyState=="complete"){if(Q){return}Q=true;R(this)}};O.onload=function(){if(!document.all){R(this)}}}i.appendChild(O)};var a=function(N,P,O){var i=function(Q){__TIPJS_TEMPLATE__[N][P].isFileAllLoaded=z(N,P,Q.src);if(__TIPJS_TEMPLATE__[N][P].isFileAllLoaded){I(N,P)}};r(O,f(N),i)};var t=function(O,Q){b(O,Q);var N=g(O);var S=l(N,Q);__TIPJS_TEMPLATE__[O][Q].requireList=S;if(S.length>0){for(var P=0,R=S.length;P<R;P++){a(O,Q,S[P])}}else{I(O,Q)}};var s=tipJS.loadCommonModel=function(i,Q){var O=__TIPJS_TEMPLATE__.common.models;if(!O[i]||O[i]==undefined){throw"Could not find commonModel: "+i}if(Q===true){var N=__TIPJS_TEMPLATE__.common.syncModels;if(!N){N=__TIPJS_TEMPLATE__.common.syncModels={}}if(!N[i]){N[i]=A(O[i]);N[i].loadCommonModel=s}return N[i]}var P={};P=A(O[i]);P.loadCommonModel=s;return P};var m=function(N,S,i){var P,R;if(!i){R=this.__appName__}else{R=i}P=__TIPJS_TEMPLATE__.department[R].models;if(!P[N]||P[N]==undefined){throw"Could not find model: "+N}if(S===true){var O=__TIPJS_TEMPLATE__.department[R].syncModels;if(!O){O=__TIPJS_TEMPLATE__.department[R].syncModels={}}if(!O[N]){O[N]=A(P[N]);O[N].loadCommonModel=s;O[N].loadModel=m}return O[N]}var Q={};Q=A(P[N]);Q.loadCommonModel=s;Q.loadModel=m;return Q};var L=tipJS.loadModel=function(N,Q){var R=(typeof(Q)==="boolean")?Q:false;var O=N.split("."),P=O[0],i=O[1];return m(i,R,P)};var g=function(i){return tipJS.__application__[i].define};var f=function(i){var O={};if(tipJS.__application__[i].define){var N=g(i);var P=N.noCacheVersion;if(N.noCacheAuto&&N.noCacheAuto===true){P=""+Math.random()}O.nocache=N.noCache;O.version=P;O.paramName=N.noCacheParam}return O};var I=function(U,i){if(tipJS.__application__[U].loadOrder.isLastOrder()){var R=s;var P=function(Y){var X=__TIPJS_TEMPLATE__.common.views;if(!X[Y]||X[Y]==undefined){throw"Could not find commonView: "+Y}var W={};W=A(X[Y]);W.loadCommonView=P;W.renderTemplate=c;return W};var O=m;var V=function(Y){var X=__TIPJS_TEMPLATE__.department[this.__appName__].views;if(!X[Y]||X[Y]==undefined){throw"Could not find view: "+Y}var W={};W=A(X[Y]);W.loadCommonView=P;W.loadView=V;W.renderTemplate=c;return W};if(__TIPJS_TEMPLATE__.department[U].controllers){var S=__TIPJS_TEMPLATE__.department[U].controllers;for(var Q in S){if(__TIPJS_TEMPLATE__.common.models){S[Q].loadCommonModel=R}if(__TIPJS_TEMPLATE__.common.views){S[Q].loadCommonView=P}if(__TIPJS_TEMPLATE__.department[U].models){S[Q].loadModel=O}if(__TIPJS_TEMPLATE__.department[U].views){S[Q].loadView=V}S[Q].renderTemplate=c}tipJS.__application__[U].controller=S}var N=function(){tipJS.__application__[U].define.onLoad(tipJS.__application__[U].onLoadParam);if(tipJS.__reservedStack__&&tipJS.__reservedStack__[U]){var X=tipJS.__reservedStack__[U];delete tipJS.__reservedStack__[U];for(var Z=0,Y=X.length;Z<Y;Z++){var W=X[Z];tipJS.action(W.name,W.param)}}};N()}else{var T=tipJS.__application__[U].loadOrder.nextOrder();t(U,T)}};var u=function(P,S,R){var O=[];for(var N=0,Q=R.length;N<Q;N++){O.push(P+h(S)+R[N])}return O};var z=function(N,P,S){var T=true;var R=__TIPJS_TEMPLATE__[N][P].requireList;for(var O=0,Q=R.length;O<Q;O++){if(R[O]===true){continue}if(S.indexOf(R[O])>=0){__TIPJS_TEMPLATE__[N][P].requireList[O]=true;break}}for(var O=0,Q=R.length;O<Q;O++){if(R[O]!==true){T=false;break}}return T};var h=function(i){return tipJS._const.pathDiv+i+tipJS._const.pathDiv};var w=function(O){if(typeof O=="boolean"||typeof O=="number"||typeof O=="string"){return O}var N=(O instanceof Array)?[]:{};for(var i in O){if(O[i]&&typeof O[i]=="object"){N[i]=A(O[i])}else{if(O[i]&&typeof O[i]=="function"){}else{N[i]=O[i]}}}return N};var A=tipJS.cloneObject=function(O){if(typeof O=="boolean"||typeof O=="number"||typeof O=="string"){return O}var N=(O instanceof Array)?[]:{};for(var i in O){if(O[i]&&typeof O[i]=="object"){N[i]=A(O[i])}else{N[i]=O[i]}}return N};var p=function(O){var Q=[],N=O.length;for(var R=0;R<N;R++){for(var P=R+1;P<N;P++){if(O[R]===O[P]){P=++R}}Q.push(O[R])}return Q};var K=function(O){var S=document.getElementsByTagName("script"),N=false;for(var Q=0,R=S.length;Q<R;Q++){var P=S[Q].src;if(P===O){N=true;break}}return N};var C=function(i,N,O){if(N.addEventListener){N.addEventListener(i,O,false)}else{if(N.attachEvent){N.attachEvent("on"+i,O)}}};var b=function(i,N){__TIPJS_TEMPLATE__[i]=__TIPJS_TEMPLATE__[i]||{};__TIPJS_TEMPLATE__[i][N]=__TIPJS_TEMPLATE__[i][N]||{}};var n=function(P){if(P.commonLib){for(var R=0,N=P.commonLib.length;R<N;R++){var S=P.commonLib[R];if(P.noCache&&P.noCache===true){S=(S.indexOf("?")<0)?S+"?":S+"&";S=S+(P.noCacheParam?P.noCacheParam:tipJS._config.noCacheParam)+"=";if(P.noCacheAuto&&P.noCacheAuto===true){S=S+Math.random()}else{S=S+(P.noCacheVersion?P.noCacheVersion:tipJS._config.noCacheVersion)}}document.write('<script type="text/javascript" charset="'+(P.charSet?P.charSet:tipJS._config.charSet)+'" src="'+S+'"><\/script>')}delete P.commonLib}if(P.commonModel){for(var R=0,N=P.commonModel.length;R<N;R++){var S=P.commonModel[R];if(P.noCache&&P.noCache===true){S=(S.indexOf("?")<0)?S+"?":S+"&";S=S+(P.noCacheParam?P.noCacheParam:tipJS._config.noCacheParam)+"=";if(P.noCacheAuto&&P.noCacheAuto===true){S=S+Math.random()}else{S=S+(P.noCacheVersion?P.noCacheVersion:tipJS._config.noCacheVersion)}}document.write('<script type="text/javascript" charset="'+(P.charSet?P.charSet:tipJS._config.charSet)+'" src="'+S+'"><\/script>')}delete P.commonModel}if(P.commonView){for(var R=0,N=P.commonView.length;R<N;R++){var S=P.commonView[R];if(P.noCache&&P.noCache===true){S=(S.indexOf("?")<0)?S+"?":S+"&";S=S+(P.noCacheParam?P.noCacheParam:tipJS._config.noCacheParam)+"=";if(P.noCacheAuto&&P.noCacheAuto===true){S=S+Math.random()}else{S=S+(P.noCacheVersion?P.noCacheVersion:tipJS._config.noCacheVersion)}}document.write('<script type="text/javascript" charset="'+(P.charSet?P.charSet:tipJS._config.charSet)+'" src="'+S+'"><\/script>')}delete P.commonView}tipJS._config=M(P,__TIPJS_TEMPLATE__.objectTmp.config);if(tipJS.isDevelopment===null){var O=window.location.hostname;for(var R=0,Q=tipJS._config.developmentHostList.length;R<Q;R++){if(O.match(tipJS._config.developmentHostList[R])!==null){tipJS.isDevelopment=true;break}}}};var y=function(){var O=false;if(window.XMLHttpRequest){O=new XMLHttpRequest()}else{if(window.ActiveXObject){try{O=new ActiveXObject("Msxml2.XMLHTTP")}catch(N){try{O=new ActiveXObject("Microsoft.XMLHTTP")}catch(i){}}}}return O};var c=function(O){var N=f(this.__appName__);var P=F(O.url,N);var i=y();i.onreadystatechange=function(){if(i.readyState==4){if(i.status==200){var Q=i.responseText;Q=D(Q,O.data);document.getElementById(O.renderTo).innerHTML+=Q}else{throw"Could not find template file:"+P}}};i.open("GET",P,false);i.send()};var D=function(O,Q){O=O.replace(/\r\n/g,"\n");O=O.replace(/\r/g,"\n");O=O.replace(/\\/g,"\\\\");O=O.replace(/\n/g,"\\n");O=O.replace(/"/g,'\\"');var N=O.split("\\n");var i=E(N);var P=new Function("data",i);return P(Q)};var E=function(R){var Q=[];Q.push("var __temp_HTML__ = [];");var O="__temp_HTML__.push(";for(var P=0,N=R.length;P<N;P++){var S=R[P];if(S.indexOf("<@=")>-1){S='"'+S+'"';S=S.replace(/<@=/g,'"+');S=S.replace(/@>/g,'+"');Q.push(O+S+");")}else{if(S.indexOf("<@")>-1){S=S.replace(/<@/g,"");S=S.replace(/@>/g,"");Q.push(S)}else{S='"'+S+'"';Q.push(O+S+");")}}}Q.push("return __temp_HTML__.join('');");return Q.join("")};tipJS.__globalNameSpace__=tipJS.__globalNameSpace__||{};__TIPJS_TEMPLATE__={};tipJS.__application__=tipJS.__application__||{};__TIPJS_TEMPLATE__.department=__TIPJS_TEMPLATE__.department||{};__TIPJS_TEMPLATE__.common=__TIPJS_TEMPLATE__.common||{};__TIPJS_TEMPLATE__.common.models=__TIPJS_TEMPLATE__.common.models||{};__TIPJS_TEMPLATE__.common.views=__TIPJS_TEMPLATE__.common.views||{};tipJS.commonModel=function(i){if(i.name){__TIPJS_TEMPLATE__.common.models[i.name]=i}};tipJS.commonView=function(i){if(i.name){__TIPJS_TEMPLATE__.common.views[i.name]=i}};tipJS.config=n;tipJS._const=(function(){var i={pathDiv:"/",blank:"",extJS:"js",extDiv:"."};return i})();tipJS.log=function(O){window.console=window.console||{log:function(){},error:function(){}};var S=new Date(),i=S.getFullYear(),U=S.getMonth()+1,P=S.getDate(),T=S.getHours(),N=S.getMinutes(),Q=S.getSeconds(),R=S.getMilliseconds();console.log(i+"/"+U+"/"+P+" "+T+":"+N+":"+Q+"."+R+" ### "+O)};tipJS.debug=function(i){if(tipJS.isDevelopment){tipJS.log(i)}};tipJS.getGlobal=function(i){if(tipJS.__globalNameSpace__[i]===undefined){throw"Could not find global: "+i}return A(tipJS.__globalNameSpace__[i])};tipJS.setGlobal=function(i,N){if(i===undefined||N===undefined){throw"tipJS.setGlobal : invalid parameter"}tipJS.__globalNameSpace__[i]=A(N)};__TIPJS_TEMPLATE__.objectTmp={config:{noCache:false,noCacheVersion:1,noCacheParam:"noCacheVersion",noCacheAuto:false,charSet:"utf-8",defineFileName:"define",path:{controllers:"controllers",models:"models",views:"views"},developmentHostList:[],applicationPath:{}},define:{extLib:[],controllers:[],models:[],views:[],templates:[],onLoad:function(){},beforeController:function(){},afterController:function(){}},loadOrder:{index:0,init:function(){this.index=0},presentOrder:function(){return this.order[this.index]},nextOrder:function(){return this.order[++this.index]},isLastOrder:function(){return(this.index+1)==this.order.length},order:["extLib","controllers","models","views"]}};tipJS._config=tipJS._config||{};tipJS._config=M(tipJS._config,__TIPJS_TEMPLATE__.objectTmp.config);var j=window.location.pathname,G=window.location.search,B=document.getElementsByTagName("script"),x,d,k,q,v=null,H=tipJS._config.developmentHostList;for(var J=0,o=B.length;J<o;J++){d=B[J].src;k=d.match(/tipJS-MVC-1\.18\.js$/);if(k){x=d.substring(0,d.length-k[0].length);break}}document.write('<script type="text/javascript" charset="UTF-8" src="'+x+"tipJS.config.js?"+tipJS._config.noCacheParam+"="+Math.random()+'"><\/script>');if(G.match("(\\?|&)debug")!==null||j.match("debug")!==null){v=true}else{if(G.match("(\\?|&)nodebug")!==null||j.match("nodebug")!==null){v=false}}tipJS.isDevelopment=v;tipJS.controller=function(i){e("controllers",i)};tipJS.model=function(i){e("models",i)};tipJS.view=function(i){e("views",i)};tipJS.action=function(X,N){var aa=X.split("."),T=aa[0],W=aa[1];if(!tipJS.__application__[T]||!tipJS.__application__[T].loadOrder||!tipJS.__application__[T].loadOrder.isLastOrder()){tipJS.__reservedStack__=tipJS.__reservedStack__||{};tipJS.__reservedStack__[T]=tipJS.__reservedStack__[T]||[];tipJS.__reservedStack__[T].push({name:X,param:N});return}if(!tipJS.__application__[T]||!tipJS.__application__[T].controller||!tipJS.__application__[T].controller[W]){throw"Could not find controller: "+X}var Q=A(tipJS.__application__[T].controller[W]);var V=tipJS.__application__[T].define.beforeController;var Z=tipJS.__application__[T].define.afterController;if(Q&&Q.exceptionInvoke){if(V){V(N)}try{var R=function(){if(Q.afterInvoke){Q.afterInvoke(N)}};var S=function(){var ab=true;if(Q.invoke){ab=Q.invoke(N)}if(ab!==false){R()}};var Y=function(){var ab=true;if(Q.beforeInvoke){ab=Q.beforeInvoke(N)}if(ab!==false){S()}};Y()}catch(U){if(Q.exceptionInvoke){Q.exceptionInvoke(U,N)}}finally{if(Z){Z(N)}if(Q.returnResult){var i=Q.returnResult;return i}}}else{if(Q){var O=function(){if(Z){Z(N)}};var P=function(){var ab=true;if(Q.afterInvoke){ab=Q.afterInvoke(N)}if(ab!==false){O()}};var R=function(){var ab=true;if(Q.invoke){ab=Q.invoke(N)}if(ab!==false){P()}};var S=function(){var ab=true;if(Q.beforeInvoke){ab=Q.beforeInvoke(N)}if(ab!==false){R()}};var Y=function(){var ab=true;if(V){ab=V(N)}if(ab!==false){S()}};Y();if(Q.returnResult){var i=Q.returnResult;return i}}else{throw"Could not find controller"}}};tipJS.loadApp=function(R,S){tipJS._loadApps=R;for(var N=0,O=R.length;N<O;N++){var Q=R[N],P=[];if(S){tipJS.__application__[Q]=tipJS.__application__[Q]||{};tipJS.__application__[Q].onLoadParam=S}P.push(tipJS._config.applicationPath[Q]);P.push(tipJS._const.pathDiv);P.push(tipJS._config.defineFileName);P.push(tipJS._const.extDiv);P.push(tipJS._const.extJS);setTimeout(function(){if(!tipJS.__application__[Q].define){throw"Could not find application: "+Q}},1000);r(P.join(tipJS._const.blank),{nocache:true,version:Math.random(),paramName:tipJS._config.noCacheParam})}};tipJS.define=function(i){i=M(i,__TIPJS_TEMPLATE__.objectTmp.define);if(i.noCache===undefined){i.noCache=tipJS._config.noCache;i.noCacheVersion=tipJS._config.noCacheVersion;i.noCacheParam=tipJS._config.noCacheParam;i.noCacheAuto=tipJS._config.noCacheAuto}else{if(i.noCache===true){if(i.noCacheVersion===undefined){i.noCacheVersion=tipJS._config.noCacheVersion}if(i.noCacheParam===undefined){i.noCacheParam=tipJS._config.noCacheParam}if(i.noCacheAuto===undefined){i.noCacheAuto=tipJS._config.noCacheAuto}}}var N=i.name;tipJS.__globalNameSpace__[N]=tipJS.__globalNameSpace__[N]||{};tipJS.__application__[N]=tipJS.__application__[N]||{};tipJS.__application__[N].loadOrder={};tipJS.__application__[N].loadOrder=M(tipJS.__application__[N].loadOrder,__TIPJS_TEMPLATE__.objectTmp.loadOrder);var O=tipJS.__application__[N].loadOrder.presentOrder();b(N,O);tipJS.__application__[N].define=i;t(N,O)}})();